/* PUKIPUKI PREMIUM CSS 
   Особенности: Glassmorphism, Neon Glow, SVG-мимика
*/

:root {
  --bg: #000000;
  --white: #ffffff;
  --think-color: #ffd966;  /* Желтый */
  --listen-color: #ff66ff; /* Фиолетовый */
  --love-color: #ff3366;   /* Розовый */
  --angry-color: #ff0000;  /* Красный */
  --sad-color: #3399ff;    /* Синий */
  
  --glass-bg: rgba(255, 255, 255, 0.06);
  --glass-border: rgba(255, 255, 255, 0.12);
}

* {
  margin: 0; padding: 0; box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}

body {
  background: var(--bg);
  height: 100vh; width: 100vw;
  overflow: hidden;
  font-family: 'Inter', -apple-system, sans-serif;
  display: flex; justify-content: center;
}

/* ===== СТРУКТУРА ЭКРАНА ===== */
.scene {
  width: 100%; height: 100%;
  display: flex; flex-direction: column;
  justify-content: space-between;
  padding: 40px 20px;
  max-width: 480px; /* Оптимально для мобильных */
}

/* ===== ЗОНА ЛИЦА ===== */
.robot-wrapper {
  flex: 1.5;
  display: flex; justify-content: center; align-items: center;
}

#face {
  display: flex; flex-direction: column;
  align-items: center; gap: 30px;
  transition: transform 0.3s ease;
}

.eyes-container {
  display: flex;
  gap: 35px; /* Глаза близко друг к другу */
}

.eye {
  width: 46px; height: 75px;
  background: var(--white);
  border-radius: 50px;
  filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.4));
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  -webkit-mask-size: contain; -webkit-mask-repeat: no-repeat; -webkit-mask-position: center;
}

/* РОТ */
.mouth-container {
  height: 30px;
  display: flex; justify-content: center; align-items: center;
}

.smile {
  width: 45px; height: 18px;
  border-bottom: 5px solid var(--white);
  border-radius: 0 0 50px 50px;
  transition: all 0.4s ease;
  filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.2));
}

/* ===== СИСТЕМА ЭМОЦИЙ (Триггеры по цвету из JS) ===== */

/* 1. СЛУШАЕТ (Фиолетовые круги + Рот "О") */
.eye[style*="rgb(255, 102, 255)"] {
  background: var(--listen-color) !important;
  width: 65px; height: 65px; border-radius: 50%;
  filter: drop-shadow(0 0 25px var(--listen-color)) !important;
}
#face:has(.eye[style*="rgb(255, 102, 255)"]) .smile {
  width: 25px; height: 25px;
  border: 5px solid var(--listen-color); border-radius: 50%;
}

/* 2. ДУМАЕТ (Желтый прищур + Рот-линия) */
.eye[style*="rgb(255, 217, 102)"] {
  background: var(--think-color) !important;
  height: 14px; width: 62px; border-radius: 10px;
  filter: drop-shadow(0 0 20px var(--think-color)) !important;
  animation: thinkPulse 1s infinite alternate;
}
#face:has(.eye[style*="rgb(255, 217, 102)"]) .smile {
  width: 50px; height: 0; border-bottom: 5px solid var(--think-color); border-radius: 0;
}

/* 3. ЛЮБОВЬ (Сердечки) - если JS пришлет розовый #ff3366 */
.eye[style*="rgb(255, 51, 102)"] {
  background: var(--love-color) !important;
  width: 60px; height: 60px; border-radius: 0;
  -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z'/%3E%3C/svg%3E");
  filter: drop-shadow(0 0 25px var(--love-color)) !important;
}

/* 4. ЗЛОСТЬ (> <) - если JS пришлет красный #ff0000 */
.eye[style*="rgb(255, 0, 0)"] {
  background: var(--angry-color) !important;
  width: 55px; height: 55px; border-radius: 0;
}
.eye[style*="rgb(255, 0, 0)"].left { -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6z'/%3E%3C/svg%3E"); }
.eye[style*="rgb(255, 0, 0)"].right { -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6z'/%3E%3C/svg%3E"); }

/* ===== ИНТЕРФЕЙС (Текст и Кнопки) ===== */
#tablet {
  flex: 0.7;
  background: var(--glass-bg);
  backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 28px; padding: 25px;
  display: flex; align-items: center; justify-content: center;
  box-shadow: 0 15px 35px rgba(0,0,0,0.6);
}

.text-content {
  font-size: 1.1rem; line-height: 1.5; color: #fff; text-align: center;
}

.controls-area {
  display: flex; flex-direction: column; align-items: center; gap: 20px;
}

#chatInput {
  width: 100%; display: flex;
  background: var(--glass-bg); border: 1px solid var(--glass-border);
  border-radius: 30px; padding: 6px 18px;
}

#textInput {
  flex: 1; background: transparent; border: none;
  color: white; padding: 12px; outline: none; font-size: 16px;
}

#sendBtn {
  background: none; border: none; color: white; font-size: 20px; cursor: pointer;
}

#micBtn {
  width: 75px; height: 75px; border-radius: 50%;
  border: none; background: #fff; font-size: 32px; cursor: pointer;
  box-shadow: 0 0 25px rgba(255,255,255,0.25);
  transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

#micBtn:active { transform: scale(0.9); }

/* ===== АНИМАЦИИ ===== */
@keyframes blink {
  0%, 90%, 100% { transform: scaleY(1); }
  93% { transform: scaleY(0.05); }
}

@keyframes thinkPulse {
  from { opacity: 0.8; transform: translateY(0); }
  to { opacity: 1; transform: translateY(-5px); }
}

.eye:not([style*="rgb"]) { animation: blink 5s infinite; }

/* Скрытие лишних старых элементов */
.robot-shadow, .status-dot, .arm, br { display: none !important; }
